# 产品需求文档 (PRD) - 析见 (YouMedHub)

## 1. 项目介绍
**析见 (YouMedHub)** 是一个基于 AI 的视频内容分析与脚本拆解工具。旨在帮助内容创作者通过 AI 快速理解视频结构，自动生成包含分镜、台词、画面描述的详细脚本，从而提高创作和剪辑效率。

## 2. 核心价值与场景
1.  **视频反向工程**：用户上传参考视频，系统自动拆解为可编辑的脚本表格。
2.  **精准定位**：生成的脚本与视频时间轴联动，点击脚本行即可跳转播放对应视频片段。
3.  **权益驱动**：基于点数（Credits）的商业模式，通过注册、邀请、充值获取点数，按功能消耗点数。

## 3. 功能需求

### 3.1 用户系统
*   **注册/登录**：支持账号密码注册/登录。
*   **邀请机制**：
    *   用户拥有唯一的邀请码。
    *   新用户注册时填写邀请码，双方均可获得奖励点数。
*   **个人中心**：展示当前点数余额、充值记录、点数消耗记录。

### 3.2 权益管理 (点数系统)
系统内所有核心功能均需消耗点数，点数不足时无法使用。
*   **获取点数**：
    *   **新用户注册**：赠送固定点数（如 10 点）。
    *   **邀请奖励**：每邀请一位有效用户，赠送固定点数（如 5 点）。
    *   **充值**：用户购买点数包（预留支付接口，MVP阶段可模拟充值）。
*   **消耗点数**：
    *   **视频分析**：根据视频时长或固定单次扣费（如：基础费 5 点 + 1 点/分钟）。
    *   **其他未来功能**：预留扣费配置。

### 3.3 视频分析核心流程
1.  **上传视频**：
    *   支持拖拽上传。
    *   **限制**：文件大小上限 100MB (受限于 tmpfile.link 服务)，时长上限 20分钟（可配置）。
    *   上传服务使用 `tmpfile.link` 或本地存储（开发环境）。
2.  **任务创建与扣费**：
    *   上传成功后，前端预估消耗点数，用户确认支付点数。
    *   后端校验余额，扣除点数，创建分析任务。
3.  **AI 分析**：
    *   后端调用大模型（如 GPT-4o, Gemini 1.5 Pro）处理视频。
    *   提取关键信息：镜号、时间段（开始-结束）、画面描述、台词/旁白、景别、运镜技巧。
4.  **结果展示**：
    *   分析完成后，前端以表格形式展示脚本。
    *   **视频联动**：点击表格某一行，左侧视频播放器自动跳转到该行的“开始时间”并播放。
5.  **导出**：支持将脚本导出为 Excel (.xlsx) 文件。
6.  **历史记录**：
    *   保存用户的分析记录（默认保存 7 天，受限于视频文件有效期）。
    *   支持查看历史生成的脚本。

### 3.4 系统配置 (管理员)
*   **AI 模型配置**：设置 API Endpoint, API Key, Model Name。
*   **计费规则配置**：设置各项功能的点数消耗规则。

## 4. 界面布局 (UI)
采用 **三栏式布局**，最大化利用宽屏空间，提供沉浸式工作台体验。

*   **左侧栏 (功能导航)**：宽度较窄。包含：新建分析、历史记录、个人中心（点数）、系统设置。
*   **中栏 (配置与输入)**：宽度中等。包含：视频上传区（上传后变为视频播放器）、参数配置（提示词微调）、消耗点数预览、开始分析按钮。
*   **右侧栏 (工作区)**：宽度最大。
    *   **全区域**：分析结果表格（可编辑、可导出）。表格最后一列为“视频预览”，支持 Hover 播放对应片段。

## 5. 数据要求
*   **脚本字段**：
    *   `id`: 序号
    *   `startTime`: 开始时间 (00:00:05)
    *   `endTime`: 结束时间 (00:00:10)
    *   `visual`: 画面描述 (Visual)
    *   `audio`: 音频/台词 (Audio)
    *   `shotType`: 景别 (全景/中景/特写)
    *   `cameraMove`: 运镜 (推/拉/摇/移)
    *   `remark`: 备注
    *   `preview`: 视频预览 (前端交互字段，非数据库存储)

## 6. 非功能需求
*   **响应速度**：上传后需有明确进度条；分析过程较长（可能 1-3 分钟），需提供轮询或 SSE 进度反馈。
*   **安全性**：API Key 必须存储在后端，严禁前端直接调用 AI 接口。
