# v0.2.1 UI 优化 — 界面设计

## 1. 整体布局变更概览

```text
v0.2.0                                          v0.2.1
+-------------------+-------------------+       +-------------------+-------------------+
| 左侧面板          | 右侧主区域        |       | 左侧面板          | 右侧主区域        |
|                   |                   |       |                   |                   |
| +-视频预览------+ | 分析结果 [切换]   |       | +-视频预览------+ | 分析结果 [切换]   |
| |               | | [导出]            |       | |               | | Token  [导出]    |
| +---------------+ |                   |       | +---------------+ |                   |
|                   | 12列表格           |       |                   | 9列表格(合并优化)  |
| +-分析控制------+ | (景别/运镜各一列)  |       | [▷ 开始分析]      | (景别运镜合并)     |
| | [开始分析]    | | (开始/结束/时长)   |       |  错误提示          | (时间合并)         |
| | Token: 入/出  | | (视频裁切显示)    |       |                   | (视频等比缩放)     |
| +---------------+ |                   |       |                   | (色彩标签)         |
+-------------------+-------------------+       +-------------------+-------------------+
     Card包裹+Token                                  无Card+Token移右侧
```

## 2. 左侧面板 — 分析控制精简

### v0.2.0（当前）

```text
+----------------------------------+
|  +----------------------------+  |
|  |  ▶ 视频预览                |  |
|  |  demo.mp4                  |  |
|  +----------------------------+  |
|  demo.mp4  01:30                 |
|                                  |
|  +----------------------------+  |
|  | +------------------------+ |  |  <-- Card 容器
|  | | [▷ 开始分析]           | |  |
|  | +------------------------+ |  |
|  | 输入 1,234  输出 3,456     | |  |  <-- Token Badge
|  +----------------------------+  |
+----------------------------------+
```

### v0.2.1（优化后）

```text
+----------------------------------+
|  +----------------------------+  |
|  |  ▶ 视频预览                |  |
|  |  demo.mp4                  |  |
|  +----------------------------+  |
|  demo.mp4  01:30                 |
|                                  |
|  [▷ 开始分析]                    |  <-- 无 Card，outline 按钮
|  分析失败，请重试                 |  <-- 仅错误时显示
+----------------------------------+
```

变更要点：
- 移除 Card 容器包裹
- 移除 Token Badge（移至右侧工具栏）
- 仅保留 outline 按钮 + 错误提示

## 3. 右侧工具栏 — Token 信息迁入

### v0.2.0（当前）

```text
+------------------------------------------------------------------------+
|  分析结果  |  [@ 原始内容]  [# 分镜表格]            [导出 Excel]        |
+------------------------------------------------------------------------+
```

### v0.2.1（优化后）

```text
+------------------------------------------------------------------------+
|  分析结果  |  [@ 原始内容]  [# 分镜表格]  输入1,234 输出3,456 [导出Excel]|
+------------------------------------------------------------------------+
                                            ^^^^^^^^^^^^^^^^
                                            Token Badge 从左侧迁入
```

## 4. 分镜表格 — 列合并与色彩标签

### v0.2.0 表格结构（12 列）

```text
+----+------+------+----------+----------+--------+--------+--------+------+------+------+----------+
|序号| 景别 | 运镜 | 画面内容 | 拍摄指导 |画面文案| 口播/  | 音效/  | 开始 | 结束 | 时长 | 视频预览 |
|    |      |      |          |          |/花字   | 台词   | BGM    |      |      |      |          |
+----+------+------+----------+----------+--------+--------+--------+------+------+------+----------+
| 1  | 特写 | 前推 | 晨光透过 | 利用侧逆 | 封面   |   -    | 轻快   |00:00 |00:03 |00:03 | +------+ |
|    |      |      | 纱帘..   | 光方向.. | 标题   |        | 吉他   |      |      |      | |▶    | |
+----+------+------+----------+----------+--------+--------+--------+------+------+------+----------+
| 2  | 全景 | 固定 | 博主穿家 | 三脚架固 | 花字:  | 大家都 | 脚步声 |00:03 |00:06 |00:03 | +------+ |
|    |      |      | 居服..   | 定机位.. | 元气   | 问我.. |        |      |      |      | |▶    | |
+----+------+------+----------+----------+--------+--------+--------+------+------+------+----------+
  ^     ^      ^                                                       ^      ^      ^        ^
  |     |      |                                                       |      |      |        |
  |     各占一列                                                        三列分开               裁切
```

### v0.2.1 表格结构（9 列）

```text
+----+------------+----------+----------+--------+--------+--------+--------------+----------+
|    | 景别/运镜  | 画面内容 | 拍摄指导 |画面文案| 口播/  | 音效/  |    时间      | 视频预览 |
|序号|            |          |          |/花字   | 台词   | BGM    |              |          |
+----+------------+----------+----------+--------+--------+--------+--------------+----------+
|    | [特写]     |          |          |        |        |        |              | +------+ |
| 1  | [前推]     | 晨光透过 | 利用侧逆 | 封面   |   -    | 轻快   | 00:00-00:03  | |      | |
| ^  |  ^    ^    | 纱帘..   | 光方向.. | 标题   |        | 吉他   | 时长: 00:03  | | 等比 | |
|居中| 色彩Badge  |          |          |        |        |        |              | | 缩放 | |
|    |            |          |          |        |        |        |              | +------+ |
|    |            |          |          |        |        |        |              | 00:00-   |
|    |            |          |          |        |        |        |              |    00:03 |
+----+------------+----------+----------+--------+--------+--------+--------------+----------+
|    | [全景]     |          |          |        |        |        |              | +------+ |
| 2  | [固定]     | 博主穿家 | 三脚架固 | 花字:  | 大家都 | 脚步声 | 00:03-00:06  | |      | |
|    |            | 居服..   | 定机位.. | 元气   | 问我.. |        | 时长: 00:03  | | 等比 | |
|    |            |          |          |        |        |        |              | | 缩放 | |
|    |            |          |          |        |        |        |              | +------+ |
|    |            |          |          |        |        |        |              | 00:03-   |
|    |            |          |          |        |        |        |              |    00:06 |
+----+------------+----------+----------+--------+--------+--------+--------------+----------+
```

## 5. 色彩标签映射

```text
景别 Badge 色彩:
+------------------+------------------+
| 关键字           | 颜色             |
+------------------+------------------+
| 远景 / 大远景    | ████ 蓝色 blue   |
| 全景             | ████ 青色 cyan   |
| 中景             | ████ 绿色 green  |
| 近景             | ████ 橙色 orange |
| 特写 / 大特写    | ████ 红色 red    |
| 其他             | ████ 灰色 gray   |
+------------------+------------------+

运镜 Badge 色彩:
+------------------+------------------+
| 关键字           | 颜色             |
+------------------+------------------+
| 固定 / 静止      | ████ 灰色 gray   |
| 推               | ████ 蓝色 blue   |
| 拉               | ████ 青色 cyan   |
| 摇               | ████ 绿色 green  |
| 移               | ████ 紫色 purple |
| 跟               | ████ 橙色 orange |
| 其他             | ████ 灰色 gray   |
+------------------+------------------+

示例单元格渲染:
+------------+
| [特写]     |  <-- 红色背景 Badge
| [缓慢前推] |  <-- 蓝色背景 Badge（含"推"）
+------------+
```

## 6. 视频预览 — 等比缩放

### v0.2.0（裁切模式）

```text
+--------+  h-20 w-32 (80x128px)
|XXXXXXXX|  object-cover: 裁切填充
|XX视频XX|  超出部分被裁掉
|XXXXXXXX|
+--------+
[▶ 00:00-00:03]  <-- 按钮
```

### v0.2.1（等比缩放模式）

```text
+------------+  max-h-[260px] w-full
|            |  object-contain: 等比缩放
|  +------+  |  不裁切，完整显示
|  | 视频 |  |  居中对齐
|  +------+  |
|            |
+------------+
 00:00-00:03    <-- 纯文本（非按钮）
```

交互方式：
```text
  鼠标移入 (mouseenter)        鼠标移出 (mouseleave)
  ┌──────────────────┐         ┌──────────────────┐
  │                  │         │                  │
  │   ▶ 自动播放     │  ───>   │   ■ 暂停          │
  │   (静音, muted)  │         │   回到起始帧      │
  │                  │         │                  │
  └──────────────────┘         └──────────────────┘
```

## 7. 分析流程 viewMode 自动切换

```text
                 +-------------+
                 |  点击分析    |
                 +------+------+
                        |
                 viewMode = 'markdown'
                        |
                 +------v------+
                 |   分析中    |
                 | 右侧显示    |
                 | [原始内容]  |  <-- 用户可看到流式输出
                 | 流式Markdown|
                 +------+------+
                        |
                   分析完成
                        |
                 viewMode = 'table'
                        |
                 +------v------+
                 |  分析完成   |
                 | 右侧自动    |
                 | 切换到      |
                 | [分镜表格]  |  <-- 自动切换
                 +-------------+
```

## 8. 完整页面 — 分析完成态（v0.2.1）

```text
+-----------------------------------------------------------------------------------+
|  youmedhub                                                       [API Key 设置]   |
+-------------------+---------------------------------------------------------------+
|                   | 分析结果 | [原始内容] [分镜表格]  输入1,234 输出3,456 [导出Excel]|
|                   +---------------------------------------------------------------+
| +-视频预览------+ |                                                               |
| | +----------+  | | +---------------------------------------------------------------+
| | | ▶ demo   |  | | |序号|景别/运镜|画面内容  |拍摄指导  |文案  |台词 |音效 |时间       |预览    |
| | +----------+  | | |----+---------+---------+---------+-----+-----+-----+----------+--------+
| | demo.mp4     | | | 1  |[特写]   |晨光透过  |利用侧逆  |封面  | -   |轻快 |00:00-    |+----+  |
| |   01:30      | | |    |[前推]   |纱帘照射  |光方向..  |标题  |     |吉他 |  00:03   ||    |  |
| +--------------+ | |    |         |花瓶..    |         |     |     |     |时长:00:03 ||等比|  |
|                  | |    |         |         |         |     |     |     |          ||缩放|  |
| [▷ 开始分析]     | |    |         |         |         |     |     |     |          |+----+  |
|                  | |    |         |         |         |     |     |     |          |00:00-  |
|                  | |    |         |         |         |     |     |     |          | 00:03  |
|                  | |----+---------+---------+---------+-----+-----+-----+----------+--------+
|                  | | 2  |[全景]   |博主穿家  |三脚架固  |花字  |大家 |脚步 |00:03-    |+----+  |
|                  | |    |[固定]   |居服走出  |定机位..  |元气  |都问 |声   |  00:06   ||    |  |
|                  | |    |         |伸懒腰   |         |     |我.. |     |时长:00:03 ||等比|  |
|                  | |    |         |         |         |     |     |     |          ||缩放|  |
|                  | |    |         |         |         |     |     |     |          |+----+  |
|                  | |    |         |         |         |     |     |     |          |00:03-  |
|                  | |    |         |         |         |     |     |     |          | 00:06  |
|                  | +---------------------------------------------------------------+
+-------------------+---------------------------------------------------------------+
```

## 9. 变更文件与组件对照

```text
+-------------------------------+--------------------------------------------------+
| 文件                          | 变更内容                                         |
+-------------------------------+--------------------------------------------------+
| AnalysisControl.vue           | 移除 Card 包裹                                   |
|                               | 移除 Token Badge                                 |
|                               | 移除 Badge/Card 组件导入                          |
+-------------------------------+--------------------------------------------------+
| ResultToolbar.vue             | 新增 Token Badge 显示                             |
|                               | 新增 Badge 组件导入                               |
|                               | 从 useVideoAnalysis 解构 tokenUsage               |
+-------------------------------+--------------------------------------------------+
| ScriptTable.vue               | 序号列 text-center 居中                           |
|                               | 景别+运镜 合并为 1 列 + 色彩 Badge                 |
|                               | 开始+结束+时长 合并为 1 列「时间」                  |
|                               | 视频预览列宽 w-40 -> w-48                         |
|                               | 视频预览 TableCell 添加 max-h-[300px]             |
+-------------------------------+--------------------------------------------------+
| VideoSegmentPlayer.vue        | h-20 w-32 object-cover -> max-h-[260px] w-full   |
|                               |   object-contain                                 |
|                               | hover 播放 (mouseenter/mouseleave)                |
|                               | 底部按钮 -> 纯文本时间范围                         |
+-------------------------------+--------------------------------------------------+
```
